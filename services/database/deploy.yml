# Deployment Configuration for Database Service

service:
  name: database
  type: compose
  
# Target servers for deployment
targets:
  # Deploy only to database servers
  roles:
    - database
  
  # Or by specific servers
  # servers:
  #   - staging-db-1
  #   - prod-db-1

# Compose-specific settings
compose:
  file: docker-compose.yml
  env_file: .env
  project_name: database

# This service is NOT behind nginx
proxy:
  enabled: false

# Health check
health_check:
  enabled: true
  services:
    - postgres
    - redis

# Deployment options
deployment:
  strategy: recreate  # databases should use recreate, not rolling
  wait_for_health: true
  timeout: 600
  backup_before_deploy: true  # backup data before deployment
